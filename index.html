<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>WebSocket Client</title>
  </head>
  <body>
    <h2>WebSocket Client</h2>
    <select>
      <option value="main">main</option>
      <option value="casual">casual</option>
    </select>

    <pre id="messages"></pre>
    <input type="text" id="messageInput" placeholder="Enter message" />
    <button onclick="sendMessage()">Send</button>

    <script>
      let socket = new WebSocket("ws://localhost:8080/ws");

      socket.onopen = function (event) {
        document.getElementById("messages").textContent +=
          "Connected to WebSocket server\n";
      };

      socket.onmessage = function (event) {
        const data = JSON.parse(event.data);
        console.log(data);
        document.getElementById("messages").textContent +=
          "Received: " + data.content + "\n";
      };

      socket.onclose = function (event) {
        document.getElementById("messages").textContent +=
          "Disconnected from WebSocket server\n";
      };

      function sendMessage(type = "chat") {
        const message = {
          type: type,
          content: document.getElementById("messageInput").value,
          sender: "user", // You might want to set this dynamically
          time: new Date().toISOString(),
        };
        // socket.send(message);
        socket.send(JSON.stringify(message));

        document.getElementById("messageInput").value = "";
      }
    </script>
  </body>
</html>
